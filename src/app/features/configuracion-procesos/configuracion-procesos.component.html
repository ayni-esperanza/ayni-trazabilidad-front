<div class="p-4 bg-white dark:bg-gray-900 min-h-screen">
  <div class="flex items-center justify-between mb-3">
    <h1 class="text-base font-semibold text-gray-800 dark:text-white">Configuración de Procesos</h1>

    <button
      type="button"
      (click)="abrirModalNuevoProceso()"
      class="px-4 py-1.5 bg-green-500 hover:bg-green-600 text-white text-sm font-medium rounded-full transition-colors flex items-center gap-2">
      <span class="inline-flex w-5 h-5 items-center justify-center rounded-full bg-white/20">
        <svg class="w-4 h-4" fill="none" stroke="currentColor" viewBox="0 0 24 24">
          <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M12 4v16m8-8H4"/>
        </svg>
      </span>
      Nuevo Proceso
    </button>
  </div>

  <div class="rounded-xl border border-gray-200 dark:border-gray-800 overflow-hidden">
    <div class="overflow-x-auto">
      <table class="w-full text-sm">
        <thead class="bg-gray-50 dark:bg-gray-800/60">
          <tr>
            <th class="text-left py-2 px-4 text-[11px] font-semibold text-gray-500 dark:text-gray-400">Id</th>
            <th class="text-left py-2 px-4 text-[11px] font-semibold text-gray-500 dark:text-gray-400">Proceso</th>
            <th class="text-left py-2 px-4 text-[11px] font-semibold text-gray-500 dark:text-gray-400">Area</th>
            <th class="text-left py-2 px-4 text-[11px] font-semibold text-gray-500 dark:text-gray-400">Etapas</th>
            <th class="text-left py-2 px-4 text-[11px] font-semibold text-gray-500 dark:text-gray-400">Flujo</th>
          </tr>
        </thead>

        <tbody class="divide-y divide-gray-100 dark:divide-gray-800">
          @for (p of procesos; track p.id) {
            <tr
              (click)="seleccionarProceso(p)"
              class="hover:bg-gray-50 dark:hover:bg-gray-800/40 transition-colors cursor-pointer">
              <td class="py-2 px-4 text-gray-700 dark:text-gray-300">{{ p.id }}</td>
              <td class="py-2 px-4 text-gray-700 dark:text-gray-200">{{ p.proceso }}</td>
              <td class="py-2 px-4 text-gray-700 dark:text-gray-200">{{ p.area }}</td>
              <td class="py-2 px-4 text-gray-700 dark:text-gray-200">{{ p.etapas }}</td>
              <td class="py-2 px-4">
                <div class="flex items-center gap-2 whitespace-nowrap">
                  @for (s of p.flujo; track $index) {
                    <span class="inline-flex items-center rounded-full bg-green-100 dark:bg-green-900/25 px-3 py-0.5 text-[11px] font-medium text-green-700 dark:text-green-300">
                      {{ s }}
                    </span>
                    @if ($index < p.flujo.length - 1) {
                      <span class="text-gray-400">→</span>
                    }
                  }
                </div>
              </td>
            </tr>
          }
        </tbody>
      </table>
    </div>
  </div>

  @if (mostrarModal) {
    <app-proceso-form-modal
      [visible]="true"
      [proceso]="procesoSeleccionado"
      (cerrar)="cerrarModal()"
      (guardar)="onGuardarProceso($event)"
      (eliminar)="onEliminarProceso($event)">
    </app-proceso-form-modal>
  }
</div>
