<div class="p-4 bg-gray-50 dark:bg-gray-900 min-h-screen">
  <!-- Header -->
  <div class="flex items-center justify-between mb-4">
    <h1 class="text-xl font-bold text-gray-800 dark:text-white">Estadísticas e Indicadores</h1>
  </div>

  <!-- Filtros rápidos -->
  <div class="bg-white dark:bg-gray-900 rounded-xl shadow-sm p-4 mb-6" *ngIf="!proyectoSeleccionado && !responsableSeleccionado">
    <div class="flex flex-wrap gap-3 items-center">
      <select
        [(ngModel)]="filtroCategoria"
        (ngModelChange)="cambiarFiltro($event)"
        class="px-4 py-2 text-sm border border-gray-300 dark:border-gray-600 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500 outline-none bg-white dark:bg-gray-800 dark:text-white min-w-[150px]">
        <option value="responsables">Responsables</option>
        <option value="proyectos">Proyectos</option>
      </select>
    </div>
  </div>

  <!-- Vista: Sin Detalle (Tabla General) -->
  <div *ngIf="!proyectoSeleccionado && !responsableSeleccionado">

    <!-- Tabla de Responsables -->
    <div *ngIf="filtroCategoria === 'responsables'" class="bg-white dark:bg-gray-900 rounded-xl shadow-sm overflow-hidden">
      <div class="overflow-x-auto">
        <table class="w-full text-sm">
          <thead class="bg-gray-50 dark:bg-gray-800/60">
            <tr class="border-b border-gray-200 dark:border-gray-700">
              <th class="py-2 px-4 text-left text-[11px] font-semibold text-gray-500 dark:text-gray-400">Responsable</th>
              <th class="py-2 px-4 text-left text-[11px] font-semibold text-gray-500 dark:text-gray-400">Cargo</th>
            </tr>
          </thead>
          <tbody class="divide-y divide-gray-100 dark:divide-gray-800">
            <tr
              *ngFor="let resp of responsables"
              (click)="seleccionarResponsable(resp)"
              class="hover:bg-gray-50 dark:hover:bg-gray-800/40 cursor-pointer">
              <td class="py-2 px-4 text-gray-700 dark:text-gray-200 font-medium">{{ resp.nombre }}</td>
              <td class="py-2 px-4 text-gray-700 dark:text-gray-200">{{ resp.cargo }}</td>
            </tr>
          </tbody>
        </table>
      </div>
    </div>

    <!-- Tabla de Proyectos -->
    <div *ngIf="filtroCategoria === 'proyectos'" class="bg-white dark:bg-gray-900 rounded-xl shadow-sm overflow-hidden">
      <div class="overflow-x-auto">
        <table class="w-full text-sm">
          <thead class="bg-gray-50 dark:bg-gray-800/60">
            <tr class="border-b border-gray-200 dark:border-gray-700">
              <th class="py-2 px-4 text-left text-[11px] font-semibold text-gray-500 dark:text-gray-400">Proyecto</th>
              <th class="py-2 px-4 text-left text-[11px] font-semibold text-gray-500 dark:text-gray-400">Etapa</th>
              <th class="py-2 px-4 text-left text-[11px] font-semibold text-gray-500 dark:text-gray-400">Inicio - Fin</th>
              <th class="py-2 px-4 text-left text-[11px] font-semibold text-gray-500 dark:text-gray-400">Estado</th>
            </tr>
          </thead>
          <tbody class="divide-y divide-gray-100 dark:divide-gray-800">
            <tr
              *ngFor="let proyecto of proyectos"
              (click)="seleccionarProyecto(proyecto)"
              class="hover:bg-gray-50 dark:hover:bg-gray-800/40 cursor-pointer">
              <td class="py-2 px-4 text-gray-700 dark:text-gray-200 font-medium">{{ proyecto.nombre }}</td>
              <td class="py-2 px-4 text-gray-700 dark:text-gray-200">{{ proyecto.etapa }}</td>
              <td class="py-2 px-4 text-gray-700 dark:text-gray-200">{{ proyecto.durationStart }} - {{ proyecto.durationEnd }}</td>
              <td class="py-2 px-4">
                <span class="px-3 py-1 text-xs font-medium rounded-full"
                  [ngClass]="{
                    'bg-blue-100 text-blue-700 dark:bg-blue-900/50 dark:text-blue-300': proyecto.estado === 'En Proceso',
                    'bg-green-100 text-green-700 dark:bg-green-900/50 dark:text-green-300': proyecto.estado === 'Completado'
                  }">
                  {{ proyecto.estado }}
                </span>
              </td>
            </tr>
          </tbody>
        </table>
      </div>
    </div>
  </div>

  <!-- Vista: Detalle del Proyecto -->
  <div *ngIf="proyectoSeleccionado" class="space-y-4">
    <!-- Filtros rápidos con selector de proyecto -->
    <div class="bg-white dark:bg-gray-900 rounded-xl shadow-sm p-4 mb-6">
      <div class="flex flex-wrap gap-3 items-center">
        <select 
          class="px-4 py-2 text-sm border border-gray-300 dark:border-gray-600 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500 outline-none bg-white dark:bg-gray-800 dark:text-white"
          [(ngModel)]="proyectoSeleccionado"
          (ngModelChange)="seleccionarProyecto($event)">
          <option *ngFor="let p of proyectos" [ngValue]="p">{{ p.nombre }}</option>
        </select>
        <button
          (click)="cerrarDetalle()"
          class="px-3 py-2 text-sm bg-gray-200 dark:bg-gray-700 hover:bg-gray-300 dark:hover:bg-gray-600 text-gray-700 dark:text-gray-200 rounded-lg transition-colors">
          Volver
        </button>
      </div>
    </div>

    <!-- Header: Info Proyecto + KPIs -->
    <div class="grid grid-cols-1 lg:grid-cols-2 gap-6">
      <!-- Info del Proyecto -->
      <div class="space-y-1">
        <h2 class="text-lg font-bold text-gray-800 dark:text-white">Proyecto: {{ proyectoSeleccionado.nombre }}</h2>
        <p class="text-sm text-gray-600 dark:text-gray-400">Responsable: {{ proyectoSeleccionado.responsable }}</p>
        <p class="text-sm text-gray-600 dark:text-gray-400">Cliente: {{ proyectoSeleccionado.cliente }}</p>
        <p class="text-sm text-gray-600 dark:text-gray-400">Estado: Etapa en la que se encuentra, caso contrario Registrada, Finalizada o Cancelada</p>
        <p class="text-sm text-gray-600 dark:text-gray-400">Duración: {{ proyectoSeleccionado.durationStart }} - {{ proyectoSeleccionado.durationEnd }}</p>
        <div class="mt-2">
          <p class="text-sm text-gray-600 dark:text-gray-400">Descripción:</p>
          <p class="text-sm text-gray-600 dark:text-gray-400 mt-1 line-clamp-2 overflow-hidden">{{ proyectoSeleccionado.descripcion }}</p>
        </div>
      </div>

      <!-- Etapa + KPIs -->
      <div class="space-y-3">
        <div class="text-center">
          <h3 class="text-base font-semibold text-gray-800 dark:text-white">Etapa : {{ proyectoSeleccionado.etapa }}</h3>
        </div>
        
        <!-- KPIs en una fila -->
        <div class="grid grid-cols-2 gap-3">
          <!-- Inversión -->
          <button 
            (click)="cambiarGrafico('inversion')"
            [class]="'rounded-lg p-4 text-center transition-all cursor-pointer ' + (graficoSeleccionado === 'inversion' ? 'bg-blue-500 dark:bg-blue-600 ring-2 ring-blue-400' : 'bg-gray-100 dark:bg-gray-800 hover:bg-gray-200 dark:hover:bg-gray-700')">
            <h4 [class]="'text-xs ' + (graficoSeleccionado === 'inversion' ? 'text-white' : 'text-gray-500 dark:text-gray-400')">Inversión</h4>
            <p [class]="'text-2xl font-bold ' + (graficoSeleccionado === 'inversion' ? 'text-white' : 'text-gray-800 dark:text-white')">S/. {{ (proyectoSeleccionado.inversion / 1000) | number:'1.0-0' }}k</p>
            <p [class]="'text-xs ' + (graficoSeleccionado === 'inversion' ? 'text-white' : 'text-gray-500 dark:text-gray-400')">Este mes</p>
          </button>
          
          <!-- Gasto -->
          <button 
            (click)="cambiarGrafico('gasto')"
            [class]="'rounded-lg p-4 text-center transition-all cursor-pointer ' + (graficoSeleccionado === 'gasto' ? 'bg-red-500 dark:bg-red-600 ring-2 ring-red-400' : 'bg-gray-100 dark:bg-gray-800 hover:bg-gray-200 dark:hover:bg-gray-700')">
            <h4 [class]="'text-xs ' + (graficoSeleccionado === 'gasto' ? 'text-white' : 'text-gray-500 dark:text-gray-400')">Gasto</h4>
            <p [class]="'text-2xl font-bold ' + (graficoSeleccionado === 'gasto' ? 'text-white' : 'text-gray-800 dark:text-white')">S/. {{ (proyectoSeleccionado.gasto / 1000) | number:'1.0-0' }}k</p>
            <p [class]="'text-xs ' + (graficoSeleccionado === 'gasto' ? 'text-white' : 'text-gray-500 dark:text-gray-400')">Este mes</p>
          </button>
        </div>
        
        <!-- Retorno/Sobrante centrado -->
        <div class="flex justify-center">
          <button 
            (click)="cambiarGrafico('retorno')"
            [class]="'rounded-lg p-4 text-center w-1/2 transition-all cursor-pointer ' + (graficoSeleccionado === 'retorno' ? 'bg-green-500 dark:bg-green-600 ring-2 ring-green-400' : 'bg-gray-100 dark:bg-gray-800 hover:bg-gray-200 dark:hover:bg-gray-700')">
            <h4 [class]="'text-xs ' + (graficoSeleccionado === 'retorno' ? 'text-white' : 'text-gray-500 dark:text-gray-400')">Retorno/Sobrante</h4>
            <p [class]="'text-2xl font-bold ' + (graficoSeleccionado === 'retorno' ? 'text-white' : 'text-gray-800 dark:text-white')">S/. {{ (proyectoSeleccionado.retorno / 1000) | number:'1.0-0' }}k</p>
            <p [class]="'text-xs ' + (graficoSeleccionado === 'retorno' ? 'text-white' : 'text-gray-500 dark:text-gray-400')">Este mes</p>
          </button>
        </div>
      </div>
    </div>

    <!-- Tabla de Tareas + Gráfico ROI -->
    <div class="grid grid-cols-1 lg:grid-cols-2 gap-4">
      <!-- Tabla de Tareas -->
      <div class="bg-white dark:bg-gray-900 rounded-xl shadow-sm p-3">
        <h3 class="text-base font-semibold text-gray-800 dark:text-white mb-3">Tareas de los Responsables</h3>
        <div class="overflow-x-auto">
          <table class="w-full text-xs">
            <thead>
              <tr class="border-b border-gray-200 dark:border-gray-700">
                <th class="text-left py-2 px-1 font-semibold text-gray-600 dark:text-gray-400">Id</th>
                <th class="text-left py-2 px-1 font-semibold text-gray-600 dark:text-gray-400">Responsable</th>
                <th class="text-left py-2 px-1 font-semibold text-gray-600 dark:text-gray-400">Proyecto</th>
                <th class="text-left py-2 px-1 font-semibold text-gray-600 dark:text-gray-400">Tarea</th>
                <th class="text-left py-2 px-1 font-semibold text-gray-600 dark:text-gray-400">Etapa</th>
                <th class="text-left py-2 px-1 font-semibold text-gray-600 dark:text-gray-400">Inicio - Fin</th>
                <th class="text-left py-2 px-1 font-semibold text-gray-600 dark:text-gray-400">Status</th>
              </tr>
            </thead>
            <tbody>
              <tr *ngFor="let tarea of tareasProyecto"
                class="border-b border-gray-100 dark:border-gray-700"
                [ngClass]="{'bg-red-50 dark:bg-red-900/20': tarea.status === 'alerta'}">
                <td class="py-2 px-1 text-gray-700 dark:text-gray-300">{{ tarea.id }}</td>
                <td class="py-2 px-1 text-gray-700 dark:text-gray-300">{{ tarea.responsable }}</td>
                <td class="py-2 px-1 text-gray-700 dark:text-gray-300">{{ tarea.proyecto }}</td>
                <td class="py-2 px-1 text-gray-700 dark:text-gray-300">{{ tarea.tarea }}</td>
                <td class="py-2 px-1 text-gray-700 dark:text-gray-300">{{ tarea.etapa }}</td>
                <td class="py-2 px-1 text-gray-700 dark:text-gray-300">{{ tarea.inicioFin }}</td>
                <td class="py-2 px-1">
                  <svg *ngIf="tarea.status === 'alerta'" class="w-4 h-4 text-yellow-500" fill="currentColor" viewBox="0 0 20 20">
                    <path fill-rule="evenodd" d="M8.257 3.099c.765-1.36 2.722-1.36 3.486 0l5.58 9.92c.75 1.334-.213 2.98-1.742 2.98H4.42c-1.53 0-2.493-1.646-1.743-2.98l5.58-9.92zM11 13a1 1 0 11-2 0 1 1 0 012 0zm-1-8a1 1 0 00-1 1v3a1 1 0 002 0V6a1 1 0 00-1-1z" clip-rule="evenodd"/>
                  </svg>
                  <svg *ngIf="tarea.status === 'completado'" class="w-4 h-4 text-green-500" fill="currentColor" viewBox="0 0 20 20">
                    <path fill-rule="evenodd" d="M10 18a8 8 0 100-16 8 8 0 000 16zm3.707-9.293a1 1 0 00-1.414-1.414L9 10.586 7.707 9.293a1 1 0 00-1.414 1.414l2 2a1 1 0 001.414 0l4-4z" clip-rule="evenodd"/>
                  </svg>
                </td>
              </tr>
            </tbody>
          </table>
        </div>
        <!-- Paginación -->
        <div class="flex justify-center items-center gap-2 mt-3">
          <button class="p-1.5 rounded-lg bg-gray-800 text-white hover:bg-gray-700">
            <svg class="w-3 h-3" fill="none" stroke="currentColor" viewBox="0 0 24 24">
              <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M15 19l-7-7 7-7"/>
            </svg>
          </button>
          <button class="p-1.5 rounded-lg bg-gray-800 text-white hover:bg-gray-700">
            <svg class="w-3 h-3" fill="none" stroke="currentColor" viewBox="0 0 24 24">
              <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9 5l7 7-7 7"/>
            </svg>
          </button>
        </div>
      </div>

      <!-- Gráfico ROI -->
      <div class="bg-white dark:bg-gray-900 rounded-xl shadow-sm p-3">
        <h3 class="text-base font-semibold text-gray-800 dark:text-white mb-1 text-center">
          {{ graficoSeleccionado === 'inversion' ? 'Inversión' : graficoSeleccionado === 'gasto' ? 'Gasto' : 'Retorno/Sobrante' }}
        </h3>
        <p class="text-xs text-gray-500 dark:text-gray-400 mb-2 text-center">Gráfico de barras y líneas</p>
        <div class="flex justify-center">
          <ngx-charts-bar-vertical
            [view]="[350, 180]"
            [scheme]="graficoSeleccionado === 'inversion' ? colorSchemeBlue : graficoSeleccionado === 'gasto' ? colorSchemeRed : colorScheme"
            [results]="datosGrafico"
            [xAxis]="true"
            [yAxis]="true"
            [legend]="false"
            [showXAxisLabel]="false"
            [showYAxisLabel]="false"
            [gradient]="false"
            [barPadding]="8"
            [roundEdges]="false">
          </ngx-charts-bar-vertical>
        </div>
      </div>
    </div>
  </div>

  <!-- Vista: Detalle del Responsable -->
  <div *ngIf="responsableSeleccionado" class="space-y-4">
    <!-- Filtros rápidos con selector de responsable -->
    <div class="bg-white dark:bg-gray-900 rounded-xl shadow-sm p-4 mb-6">
      <div class="flex flex-wrap gap-3 items-center">
        <select 
          class="px-4 py-2 text-sm border border-gray-300 dark:border-gray-600 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500 outline-none bg-white dark:bg-gray-800 dark:text-white min-w-[200px]"
          [(ngModel)]="responsableSeleccionado"
          (ngModelChange)="seleccionarResponsable($event)">
          <option *ngFor="let r of responsables" [ngValue]="r">{{ r.nombre }}</option>
        </select>
        <button
          (click)="cerrarDetalle()"
          class="px-3 py-2 text-sm bg-gray-200 dark:bg-gray-700 hover:bg-gray-300 dark:hover:bg-gray-600 text-gray-700 dark:text-gray-200 rounded-lg transition-colors">
          Volver
        </button>
      </div>
    </div>

    <!-- Info del Responsable en header -->
    <div class="bg-white dark:bg-gray-900 rounded-xl shadow-sm p-3 mb-4">
      <h2 class="text-base font-semibold text-gray-800 dark:text-white">
        Nombre: <span class="font-normal">{{ responsableSeleccionado.nombre }}</span> · 
        Cargo: <span class="font-normal">{{ responsableSeleccionado.cargo }}</span> · 
        Antigüedad: <span class="font-normal">{{ responsableSeleccionado.antiguedad }}</span>
      </h2>
    </div>

    <!-- Layout principal: 50/50 Tablas | KPIs -->
    <div class="grid grid-cols-1 lg:grid-cols-2 gap-4">
      <!-- Columna Izquierda: Tablas -->
      <div class="space-y-4 min-w-0 w-full h-full">

        <!-- Tabla: Participación en Proyectos -->
        <div class="bg-white dark:bg-gray-900 rounded-xl shadow-sm overflow-hidden">
          <div class="p-3">
            <h3 class="text-sm font-semibold text-gray-800 dark:text-white mb-2">Participación en Proyectos</h3>
          </div>
          <div class="overflow-x-auto">
            <table class="w-full text-sm">
              <thead class="bg-gray-50 dark:bg-gray-800/60">
                <tr class="border-b border-gray-200 dark:border-gray-700">
                  <th class="py-2 px-4 text-left text-[11px] font-semibold text-gray-500 dark:text-gray-400">Id</th>
                  <th class="py-2 px-4 text-left text-[11px] font-semibold text-gray-500 dark:text-gray-400">Proyecto</th>
                  <th class="py-2 px-4 text-left text-[11px] font-semibold text-gray-500 dark:text-gray-400">Etapa</th>
                  <th class="py-2 px-4 text-left text-[11px] font-semibold text-gray-500 dark:text-gray-400">Inicio - Fin</th>
                  <th class="py-2 px-4 text-left text-[11px] font-semibold text-gray-500 dark:text-gray-400">Status</th>
                </tr>
              </thead>
              <tbody class="divide-y divide-gray-100 dark:divide-gray-800">
                <tr *ngFor="let tarea of tareasProyecto; let i = index"
                  class="hover:bg-gray-50 dark:hover:bg-gray-800/40"
                  [ngClass]="{'bg-red-50 dark:bg-red-900/20': tarea.status === 'alerta'}">
                  <td class="py-2 px-4 text-gray-700 dark:text-gray-200">{{ i + 1 }}</td>
                  <td class="py-2 px-4 text-gray-700 dark:text-gray-200">{{ tarea.proyecto }}</td>
                  <td class="py-2 px-4 text-gray-700 dark:text-gray-200">{{ tarea.etapa }}</td>
                  <td class="py-2 px-4 text-gray-700 dark:text-gray-200">{{ tarea.inicioFin }}</td>
                  <td class="py-2 px-4">
                    <svg *ngIf="tarea.status === 'alerta'" class="w-4 h-4 text-yellow-500" fill="currentColor" viewBox="0 0 20 20">
                      <path fill-rule="evenodd" d="M8.257 3.099c.765-1.36 2.722-1.36 3.486 0l5.58 9.92c.75 1.334-.213 2.98-1.742 2.98H4.42c-1.53 0-2.493-1.646-1.743-2.98l5.58-9.92zM11 13a1 1 0 11-2 0 1 1 0 012 0zm-1-8a1 1 0 00-1 1v3a1 1 0 002 0V6a1 1 0 00-1-1z" clip-rule="evenodd"/>
                    </svg>
                    <svg *ngIf="tarea.status === 'completado'" class="w-4 h-4 text-green-500" fill="currentColor" viewBox="0 0 20 20">
                      <path fill-rule="evenodd" d="M10 18a8 8 0 100-16 8 8 0 000 16zm3.707-9.293a1 1 0 00-1.414-1.414L9 10.586 7.707 9.293a1 1 0 00-1.414 1.414l2 2a1 1 0 001.414 0l4-4z" clip-rule="evenodd"/>
                    </svg>
                  </td>
                </tr>
              </tbody>
            </table>
          </div>
        </div>

        <!-- Tabla: Tareas Asignadas -->
        <div class="bg-white dark:bg-gray-900 rounded-xl shadow-sm overflow-hidden">
          <div class="p-3">
            <h3 class="text-sm font-semibold text-gray-800 dark:text-white mb-2">Tareas Asignadas</h3>
          </div>
          <div class="overflow-x-auto">
            <table class="w-full text-sm">
              <thead class="bg-gray-50 dark:bg-gray-800/60">
                <tr class="border-b border-gray-200 dark:border-gray-700">
                  <th class="py-2 px-4 text-left text-[11px] font-semibold text-gray-500 dark:text-gray-400">Id</th>
                  <th class="py-2 px-4 text-left text-[11px] font-semibold text-gray-500 dark:text-gray-400">Tarea</th>
                  <th class="py-2 px-4 text-left text-[11px] font-semibold text-gray-500 dark:text-gray-400">Proyecto</th>
                  <th class="py-2 px-4 text-left text-[11px] font-semibold text-gray-500 dark:text-gray-400">Etapa</th>
                  <th class="py-2 px-4 text-left text-[11px] font-semibold text-gray-500 dark:text-gray-400">Inicio - Fin</th>
                  <th class="py-2 px-4 text-left text-[11px] font-semibold text-gray-500 dark:text-gray-400">Status</th>
                </tr>
              </thead>
              <tbody class="divide-y divide-gray-100 dark:divide-gray-800">
                <tr *ngFor="let tarea of tareasProyecto"
                  class="hover:bg-gray-50 dark:hover:bg-gray-800/40"
                  [ngClass]="{'bg-red-50 dark:bg-red-900/20': tarea.status === 'alerta'}">
                  <td class="py-2 px-4 text-gray-700 dark:text-gray-200">{{ tarea.id }}</td>
                  <td class="py-2 px-4 text-gray-700 dark:text-gray-200">{{ tarea.tarea }}</td>
                  <td class="py-2 px-4 text-gray-700 dark:text-gray-200">{{ tarea.proyecto }}</td>
                  <td class="py-2 px-4 text-gray-700 dark:text-gray-200">{{ tarea.etapa }}</td>
                  <td class="py-2 px-4 text-gray-700 dark:text-gray-200">{{ tarea.inicioFin }}</td>
                  <td class="py-2 px-4">
                    <svg *ngIf="tarea.status === 'alerta'" class="w-4 h-4 text-yellow-500" fill="currentColor" viewBox="0 0 20 20">
                      <path fill-rule="evenodd" d="M8.257 3.099c.765-1.36 2.722-1.36 3.486 0l5.58 9.92c.75 1.334-.213 2.98-1.742 2.98H4.42c-1.53 0-2.493-1.646-1.743-2.98l5.58-9.92zM11 13a1 1 0 11-2 0 1 1 0 012 0zm-1-8a1 1 0 00-1 1v3a1 1 0 002 0V6a1 1 0 00-1-1z" clip-rule="evenodd"/>
                    </svg>
                    <svg *ngIf="tarea.status === 'completado'" class="w-4 h-4 text-green-500" fill="currentColor" viewBox="0 0 20 20">
                      <path fill-rule="evenodd" d="M10 18a8 8 0 100-16 8 8 0 000 16zm3.707-9.293a1 1 0 00-1.414-1.414L9 10.586 7.707 9.293a1 1 0 00-1.414 1.414l2 2a1 1 0 001.414 0l4-4z" clip-rule="evenodd"/>
                    </svg>
                  </td>
                </tr>
              </tbody>
            </table>
          </div>
        </div>
      </div>

      <!-- Columna Derecha: KPIs -->
      <div class="flex flex-col gap-3 min-w-0 w-full h-full">
        <!-- Tareas Realizadas + Promedio de Eficiencia -->
        <div class="grid grid-cols-2 gap-3">
          <!-- Tareas Realizadas -->
          <div class="bg-white dark:bg-gray-900 rounded-xl shadow-sm p-3 flex flex-col items-center justify-center">
            <h4 class="text-xs text-gray-500 dark:text-gray-400 mb-1">Tareas Realizadas</h4>
            <p class="text-3xl font-bold text-gray-800 dark:text-white">{{ responsableSeleccionado.tareasRealizadas }}</p>
            <p class="text-xs text-gray-500 dark:text-gray-400">Este mes</p>
          </div>
          
          <!-- Promedio de Eficiencia con gauge SVG -->
          <div class="bg-white dark:bg-gray-900 rounded-xl shadow-sm p-3 text-center">
            <h4 class="text-xs text-gray-500 dark:text-gray-400 mb-1">Promedio de Eficiencia</h4>
            <!-- Gauge circular con SVG -->
            <div class="relative inline-flex items-center justify-center">
              <svg class="w-20 h-12" viewBox="0 0 100 50">
                <!-- Fondo del arco -->
                <path d="M 10 50 A 40 40 0 0 1 90 50" fill="none" stroke="#e5e7eb" stroke-width="8" stroke-linecap="round"/>
                <!-- Arco de progreso (90% = 4.5/5) -->
                <path d="M 10 50 A 40 40 0 0 1 90 50" fill="none" stroke="#22c55e" stroke-width="8" stroke-linecap="round"
                  [attr.stroke-dasharray]="126"
                  [attr.stroke-dashoffset]="126 - (126 * responsableSeleccionado.promedio / 5)"/>
              </svg>
            </div>
            <p class="text-2xl font-bold text-gray-800 dark:text-white">{{ responsableSeleccionado.promedio }}</p>
          </div>
        </div>

        <!-- % de Tareas Realizadas -->
        <div class="bg-white dark:bg-gray-900 rounded-xl shadow-sm p-3 flex-1">
          <h4 class="text-xs font-semibold text-gray-800 dark:text-white mb-2">% de Tareas Realizadas</h4>
          <div class="flex flex-col items-center justify-center space-y-1">
            <div class="flex justify-between items-center w-full px-2">
              <span class="text-xs text-gray-500 dark:text-gray-400">Tareas Realizadas</span>
              <span class="text-xs font-semibold text-gray-800 dark:text-white">{{ responsableSeleccionado.tareasRealizadasPorcentaje }} ({{ responsableSeleccionado.tareasRealizadasPorcentaje }}%)</span>
            </div>
            <div class="w-full px-2">
              <div class="w-full bg-gray-200 dark:bg-gray-700 rounded-full h-3">
                <div class="bg-green-500 h-3 rounded-full" [style.width.%]="responsableSeleccionado.tareasRealizadasPorcentaje"></div>
              </div>
            </div>
          </div>
        </div>

        <!-- % de Tareas Realizadas a Tiempo (TRT) -->
        <div class="bg-white dark:bg-gray-900 rounded-xl shadow-sm p-3 flex-1">
          <h4 class="text-xs font-semibold text-gray-800 dark:text-white mb-2">% de Tareas Realizadas a Tiempo (TRT)</h4>
          <div class="flex flex-col items-center justify-center space-y-1">
            <div class="flex justify-between items-center w-full px-2">
              <span class="text-xs text-gray-500 dark:text-gray-400">TRT</span>
              <span class="text-xs font-semibold text-gray-800 dark:text-white">{{ responsableSeleccionado.tareasRealizadasTiempo }} ({{ responsableSeleccionado.tareasRealizadasTiempo }}%)</span>
            </div>
            <div class="w-full px-2">
              <div class="w-full bg-gray-200 dark:bg-gray-700 rounded-full h-3">
                <div class="bg-green-500 h-3 rounded-full" [style.width.%]="responsableSeleccionado.tareasRealizadasTiempo"></div>
              </div>
            </div>
          </div>
        </div>

        <!-- % de Tareas de Proyectos (TPE) -->
        <div class="bg-white dark:bg-gray-900 rounded-xl shadow-sm p-3 flex-1">
          <h4 class="text-xs font-semibold text-gray-800 dark:text-white mb-2">% de Tareas de Proyectos</h4>
          <div class="flex flex-col items-center justify-center space-y-1">
            <div class="flex justify-between items-center w-full px-2">
              <span class="text-xs text-gray-500 dark:text-gray-400">TPE</span>
              <span class="text-xs font-semibold text-gray-800 dark:text-white">{{ responsableSeleccionado.tareasPorcentajeProyectos }} ({{ responsableSeleccionado.tareasPorcentajeProyectos }}%)</span>
            </div>
            <div class="w-full px-2">
              <div class="w-full bg-gray-200 dark:bg-gray-700 rounded-full h-3">
                <div class="bg-green-500 h-3 rounded-full" [style.width.%]="responsableSeleccionado.tareasPorcentajeProyectos"></div>
              </div>
            </div>
          </div>
        </div>
      </div>
    </div>
  </div>
</div>
